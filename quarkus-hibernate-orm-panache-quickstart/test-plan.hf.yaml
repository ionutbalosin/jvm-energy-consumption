name: test-plan-benchmark
http:
  host: http://192.168.0.2:8080
  sharedConnections: 48
duration: 600s
usersPerSec: 2
maxSessions: 48
scenario:
  # Note: scenario steps are sequentially executed
  - generateRandomUUID:
      - randomUUID:
          toVar: fruitName
  - getHomePage:
      - httpRequest:
          GET: /
  - postFruit:
      - httpRequest:
          POST: /entity/fruits
          headers:
            content-type: application/json
          body: |
            {
              "name" : "${fruitName}"
            }
  - getAllFruits:
      - httpRequest:
          GET: /entity/fruits
          handler:
            body:
              json:
                query: .[].id
                toArray: fruitIds[100]
  - getFruitById:
      - randomItem: fruitId <- fruitIds
      - httpRequest:
          GET: /entity/fruits/${fruitId}
  - putFruitById:
      - randomItem: fruitId <- fruitIds
      - httpRequest:
          PUT: /entity/fruits/${fruitId}
          headers:
            content-type: application/json
          body: |
            {
              "name" : "${fruitName} upd"
            }
  - deleteFruitById:
      - randomItem: fruitId <- fruitIds
      - httpRequest:
          DELETE: /entity/fruits/${fruitId}